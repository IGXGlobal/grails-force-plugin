/**
 * Auto-generated class by Salesforce Grails plugin.
 * Riptide Force.
 *
 * Base service that provides runtime access to the Salesforce instance.
 */
package ${PACKAGE}

import com.sforce.soap.partner.*
import com.sforce.soap.partner.sobject.*
import org.apache.axiom.om.*
import com.riptideforce.sfdc.*

class SalesForceService extends SalesForceBaseService {
	    

<%
for( typeDesc in TYPE_DESCS ) {

    def fields = typeDesc.getFields()

    def fieldStr = ""

    fields.eachWithIndex { field, i ->
        if(i>0) {
            fieldStr = fieldStr += ', '
        }
        fieldStr = fieldStr + field.getName()
    }
%>

    public List<${typeDesc.getName()}> getAll${typeDesc.getName()}s() {

        def list = fetchAll("Select ${fieldStr} from ${typeDesc.getName()}")

        def returnVals = []
        list.each { object->
            returnVals.add(${typeDesc.getName()}.build${typeDesc.getName()}(object))
        }
        return returnVals
    }

    public ${typeDesc.getName()} get${typeDesc.getName()}ById( String Id ) {
        id = "'" + id + "'"
        return ${typeDesc.getName()}.buildAccount( fetch("Select ${fieldStr} from ${typeDesc.getName()} where ID = " + id) )
    }
    
    public List<${typeDesc.getName()}> getAll${typeDesc.getName()}s( String whereClause ) {
    	def list = fetchAll("Select ${fieldStr} from ${typeDesc.getName()} where " + whereClause)

        def returnVals = []
        list.each { object->
            returnVals.add(${typeDesc.getName()}.build${typeDesc.getName()}(object))
        }
        return returnVals
    }

    public SaveResult[] create${typeDesc.getName()}s( ${typeDesc.getName()} ... objs ) {

        SObject[] sObjs = new SObject[objs.length]
        int idx = 0;

        objs.each { obj ->
            sObjs[idx++] = obj.toSObject()
        }

        return create( sObjs )
    }

    public SaveResult[] update${typeDesc.getName()}s( ${typeDesc.getName()} ... objs ) {

        SObject[] sObjs = new SObject[objs.length]
        int idx = 0;

        objs.each { obj ->
            sObjs[idx++] = obj.toSObject()
        }

        return update( sObjs )
    }

<%
}
%>

}